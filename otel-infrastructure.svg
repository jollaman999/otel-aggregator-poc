<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 1900" width="2000" height="1900">
  <!-- Define styles -->
  <defs>
    <style>
      .box { fill: #ffffff; stroke: #333; stroke-width: 2; }
      .cluster { fill: #f0f0f0; stroke: #666; stroke-width: 2; stroke-dasharray: 5,5; }
      .vip-box { fill: #e3f2fd; stroke: #1976d2; stroke-width: 3; }
      .master-box { fill: #fff3e0; stroke: #f57c00; stroke-width: 2; }
      .backup-box { fill: #f3e5f5; stroke: #7b1fa2; stroke-width: 2; }
      .storage-box { fill: #e8f5e9; stroke: #388e3c; stroke-width: 2; }
      .client-box { fill: #fce4ec; stroke: #c2185b; stroke-width: 2; }
      .keepalived-box { fill: #ffebee; stroke: #d32f2f; stroke-width: 2; }
      .haproxy-box { fill: #e8eaf6; stroke: #3f51b5; stroke-width: 2; }
      .minio-cluster { fill: #f1f8e9; stroke: #689f38; stroke-width: 3; stroke-dasharray: 8,4; }
      .text { font-family: Arial, sans-serif; font-size: 14px; fill: #333; text-anchor: middle; }
      .text-small { font-family: Arial, sans-serif; font-size: 11px; fill: #666; text-anchor: middle; }
      .title { font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; fill: #1a237e; text-anchor: middle; }
      .label { font-family: Arial, sans-serif; font-size: 10px; fill: #666; }
      .line { stroke: #333; stroke-width: 2; fill: none; }
      .line-blue { stroke: #1976d2; stroke-width: 2; fill: none; }
      .line-orange { stroke: #f57c00; stroke-width: 2; fill: none; }
      .line-green { stroke: #388e3c; stroke-width: 2; fill: none; }
      .line-purple { stroke: #7b1fa2; stroke-width: 2; fill: none; }
      .line-brown { stroke: #5d4037; stroke-width: 2; fill: none; }
      .line-red { stroke: #d32f2f; stroke-width: 2; fill: none; }
      .arrow { stroke: #333; stroke-width: 2; fill: #333; }
    </style>

    <!-- Define arrow markers -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#1976d2" />
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#f57c00" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#388e3c" />
    </marker>
    <marker id="arrowhead-purple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#7b1fa2" />
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#d32f2f" />
    </marker>
    <marker id="arrowhead-brown" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#5d4037" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="1000" y="30" class="title">OpenTelemetry High Availability Infrastructure</text>

  <!-- External Clients -->
  <rect x="900" y="60" width="200" height="60" class="client-box" rx="5"/>
  <text x="1000" y="85" class="text">External Clients</text>
  <text x="1000" y="105" class="text-small">(OTLP/HTTP)</text>

  <!-- Virtual IP -->
  <rect x="850" y="160" width="300" height="100" class="vip-box" rx="5"/>
  <text x="1000" y="185" class="text" style="font-weight: bold;">Virtual IP: 192.168.110.140</text>
  <text x="1000" y="205" class="text-small">OTLP :4318 | Thanos QF :19193</text>
  <text x="1000" y="225" class="text-small">Thanos Q :9192 | Loki :3100</text>
  <text x="1000" y="245" class="text-small">(VRRP Managed)</text>

  <!-- Node 1 Keepalived (Above cluster, left) -->
  <rect x="360" y="280" width="140" height="60" class="keepalived-box" rx="5"/>
  <text x="430" y="305" class="text" style="font-weight: bold;">Keepalived</text>
  <text x="430" y="325" class="text-small">Priority: 100 (MASTER)</text>

  <!-- Node 2 Keepalived (Above cluster, right) -->
  <rect x="1500" y="280" width="140" height="60" class="keepalived-box" rx="5"/>
  <text x="1570" y="305" class="text" style="font-weight: bold;">Keepalived</text>
  <text x="1570" y="325" class="text-small">Priority: 90 (BACKUP)</text>

  <!-- Node 1 (MASTER) -->
  <rect x="50" y="370" width="850" height="750" class="cluster" rx="10"/>
  <text x="475" y="395" class="text" style="font-weight: bold;">Node 1 - MASTER (192.168.110.214)</text>

  <!-- Node 1: HAProxy -->
  <rect x="380" y="420" width="100" height="80" class="haproxy-box" rx="5"/>
  <text x="430" y="445" class="text" style="font-weight: bold;">HAProxy</text>
  <text x="430" y="465" class="text-small">Load Balancer</text>
  <text x="430" y="485" class="text-small">:4318/19193/9192/3100</text>

  <!-- Node 1: OTel Aggregator -->
  <rect x="80" y="550" width="140" height="70" class="master-box" rx="5"/>
  <text x="150" y="575" class="text">OTel Aggregator</text>
  <text x="150" y="595" class="text-small">:14318 (HTTP)</text>
  <text x="150" y="610" class="text-small">:14317 (gRPC)</text>

  <!-- Node 1: Prometheus -->
  <rect x="80" y="660" width="140" height="80" class="master-box" rx="5"/>
  <text x="150" y="685" class="text">Prometheus</text>
  <text x="150" y="705" class="text-small">:19090</text>
  <text x="150" y="725" class="text-small">Retention: 2h</text>

  <!-- Node 1: Thanos Sidecar -->
  <rect x="260" y="660" width="140" height="80" class="master-box" rx="5"/>
  <text x="330" y="685" class="text">Thanos Sidecar</text>
  <text x="330" y="705" class="text-small">:10901/:10902</text>

  <!-- Node 1: Thanos Receiver -->
  <rect x="80" y="780" width="140" height="80" class="master-box" rx="5"/>
  <text x="150" y="805" class="text">Thanos Receiver</text>
  <text x="150" y="825" class="text-small">:19291/:10907</text>
  <text x="150" y="845" class="text-small">:10909</text>

  <!-- Node 1: Thanos Query -->
  <rect x="260" y="780" width="140" height="80" class="master-box" rx="5"/>
  <text x="330" y="805" class="text">Thanos Query</text>
  <text x="330" y="825" class="text-small">:19192/:10904</text>

  <!-- Node 1: Query Frontend -->
  <rect x="720" y="780" width="140" height="80" class="master-box" rx="5"/>
  <text x="790" y="805" class="text">Query Frontend</text>
  <text x="790" y="815" class="text-small">:29193</text>

  <!-- Node 1: Thanos Store -->
  <rect x="60" y="900" width="140" height="60" class="master-box" rx="5"/>
  <text x="130" y="925" class="text">Thanos Store</text>
  <text x="130" y="945" class="text-small">:10905/:10906</text>

  <!-- Node 1: Compactor -->
  <rect x="280" y="900" width="140" height="60" class="master-box" rx="5"/>
  <text x="350" y="925" class="text">Compactor</text>
  <text x="350" y="945" class="text-small">:10912</text>

  <!-- Node 1: Loki -->
  <rect x="480" y="550" width="140" height="70" class="master-box" rx="5"/>
  <text x="550" y="575" class="text">Loki</text>
  <text x="550" y="595" class="text-small">:13100</text>
  <text x="550" y="610" class="text-small">Retention: 90d</text>

  <!-- Node 1: MinIO -->
  <rect x="700" y="1040" width="200" height="80" class="master-box" rx="5"/>
  <text x="800" y="1065" class="text">MinIO Node 1</text>
  <text x="800" y="1085" class="text-small">:9000 (S3 API)</text>
  <text x="800" y="1105" class="text-small">/data1 + /data2</text>

  <!-- Node 2 (BACKUP) -->
  <rect x="1100" y="370" width="850" height="750" class="cluster" rx="10"/>
  <text x="1525" y="395" class="text" style="font-weight: bold;">Node 2 - BACKUP (192.168.110.119)</text>

  <!-- Node 2: HAProxy -->
  <rect x="1520" y="420" width="100" height="80" class="haproxy-box" rx="5"/>
  <text x="1570" y="445" class="text" style="font-weight: bold;">HAProxy</text>
  <text x="1570" y="465" class="text-small">Load Balancer</text>
  <text x="1570" y="485" class="text-small">:4318/19193/9192/3100</text>

  <!-- Node 2: OTel Aggregator -->
  <rect x="1780" y="550" width="140" height="70" class="backup-box" rx="5"/>
  <text x="1850" y="575" class="text">OTel Aggregator</text>
  <text x="1850" y="595" class="text-small">:14318 (HTTP)</text>
  <text x="1850" y="610" class="text-small">:14317 (gRPC)</text>

  <!-- Node 2: Prometheus -->
  <rect x="1780" y="660" width="140" height="80" class="backup-box" rx="5"/>
  <text x="1850" y="685" class="text">Prometheus</text>
  <text x="1850" y="705" class="text-small">:19090</text>
  <text x="1850" y="725" class="text-small">Retention: 2h</text>

  <!-- Node 2: Thanos Sidecar -->
  <rect x="1600" y="660" width="140" height="80" class="backup-box" rx="5"/>
  <text x="1670" y="685" class="text">Thanos Sidecar</text>
  <text x="1670" y="705" class="text-small">:10901/:10902</text>

  <!-- Node 2: Thanos Receiver -->
  <rect x="1780" y="780" width="140" height="80" class="backup-box" rx="5"/>
  <text x="1850" y="805" class="text">Thanos Receiver</text>
  <text x="1850" y="825" class="text-small">:19291/:10907</text>
  <text x="1850" y="845" class="text-small">:10909</text>

  <!-- Node 2: Thanos Query -->
  <rect x="1600" y="780" width="140" height="80" class="backup-box" rx="5"/>
  <text x="1670" y="805" class="text">Thanos Query</text>
  <text x="1670" y="825" class="text-small">:19192/:10904</text>

  <!-- Node 2: Query Frontend -->
  <rect x="1140" y="780" width="140" height="80" class="backup-box" rx="5"/>
  <text x="1210" y="805" class="text">Query Frontend</text>
  <text x="1210" y="815" class="text-small">:29193</text>

  <!-- Node 2: Thanos Store -->
  <rect x="1800" y="900" width="140" height="60" class="backup-box" rx="5"/>
  <text x="1870" y="925" class="text">Thanos Store</text>
  <text x="1870" y="945" class="text-small">:10905/:10906</text>

  <!-- Node 2: Compactor -->
  <rect x="1580" y="900" width="140" height="60" class="backup-box" rx="5"/>
  <text x="1650" y="925" class="text">Compactor</text>
  <text x="1650" y="945" class="text-small">:10912</text>

  <!-- Node 2: Loki -->
  <rect x="1380" y="550" width="140" height="70" class="backup-box" rx="5"/>
  <text x="1450" y="575" class="text">Loki</text>
  <text x="1450" y="595" class="text-small">:13100</text>
  <text x="1450" y="610" class="text-small">Retention: 90d</text>

  <!-- Node 2: MinIO -->
  <rect x="1100" y="1040" width="200" height="80" class="backup-box" rx="5"/>
  <text x="1200" y="1065" class="text">MinIO Node 2</text>
  <text x="1200" y="1085" class="text-small">:9000 (S3 API)</text>
  <text x="1200" y="1105" class="text-small">/data1 + /data2</text>

  <!-- MinIO Distributed Cluster with Buckets -->
  <rect x="700" y="1240" width="600" height="280" class="minio-cluster" rx="10"/>
  <text x="1000" y="1270" class="text" style="font-weight: bold; font-size: 16px;">MinIO Distributed Cluster (Erasure Coding)</text>
  <text x="1000" y="1295" class="text-small">4 Drives across 2 Nodes - Distributed Mode</text>

  <!-- MinIO Storage Pool (Center) -->
  <rect x="800" y="1320" width="400" height="80" class="storage-box" rx="5"/>
  <text x="1000" y="1345" class="text" style="font-weight: bold;">Storage Pool (Erasure Coding: EC:2)</text>
  <text x="1000" y="1365" class="text-small">Node1:/data1 + /data2 | Node2:/data1 + /data2</text>
  <text x="1000" y="1385" class="text-small">4 Drives - Fault Tolerance: 2 drives</text>

  <!-- MinIO Buckets (Both point to Storage Pool) -->
  <rect x="750" y="1430" width="220" height="70" class="storage-box" rx="5" style="fill: #c8e6c9;"/>
  <text x="860" y="1455" class="text" style="font-weight: bold;">thanos-metrics</text>
  <text x="860" y="1475" class="text-small">Prometheus Blocks</text>
  <text x="860" y="1490" class="text-small">Thanos Components</text>

  <rect x="1030" y="1430" width="220" height="70" class="storage-box" rx="5" style="fill: #ffe0b2;"/>
  <text x="1140" y="1455" class="text" style="font-weight: bold;">loki-data</text>
  <text x="1140" y="1475" class="text-small">Log Chunks/Index</text>
  <text x="1140" y="1490" class="text-small">Loki Instances</text>

  <!-- Connections: Clients to VIP -->
  <path d="M 1000,120 L 1000,160" class="line-blue" marker-end="url(#arrowhead-blue)"/>
  <text x="1030" y="145" class="label" fill="#1976d2">OTLP/HTTP</text>

  <!-- VIP to Node 1 Keepalived (MASTER - active) -->
  <path d="M 900,260 L 430,280" class="line-red" marker-end="url(#arrowhead-red)"/>
  <text x="620" y="265" class="label" fill="#d32f2f">VRRP Active</text>

  <!-- VIP to Node 2 Keepalived (BACKUP - for failover) -->
  <path d="M 1100,260 L 1570,280" class="line-red" style="stroke-dasharray: 5,5" marker-end="url(#arrowhead-red)"/>
  <text x="1320" y="265" class="label" fill="#d32f2f">VRRP Failover</text>

  <!-- Node 1: Keepalived to HAProxy -->
  <path d="M 430,340 L 430,420" class="line-red" marker-end="url(#arrowhead-red)"/>
  <text x="450" y="380" class="label" fill="#d32f2f">Monitor</text>

  <!-- Node 1: HAProxy branching to services (완전히 분리된 경로) -->
  <!-- HAProxy to OTel (far left) -->
  <path d="M 380,460 L 250,460 L 250,530 L 150,530 L 150,550" class="line-blue" marker-end="url(#arrowhead-blue)"/>
  <text x="195" y="455" class="label" fill="#1976d2">OTLP :4318</text>

  <!-- HAProxy to Loki (left center) -->
  <path d="M 380,480 L 350,480 L 350,520 L 550,520 L 550,550" class="line-orange" marker-end="url(#arrowhead-orange)"/>
  <text x="460" y="515" class="label" fill="#f57c00">Loki :3100</text>

  <!-- HAProxy to Query Frontend (far right - 완전히 분리) -->
  <path d="M 480,460 L 660,460 L 660,740 L 790,740 L 790,780" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="700" y="455" class="label" fill="#7b1fa2">Query Frontend :19193</text>

  <!-- HAProxy to Thanos Query (via left side) -->
  <path d="M 380,490 L 200,490 L 200,755 L 260,755 L 260,810" class="line-purple" style="stroke-dasharray: 3,3" marker-end="url(#arrowhead-purple)"/>
  <text x="210" y="620" class="label" fill="#7b1fa2">Query :9192</text>

  <!-- Node 1: OTel to Prometheus -->
  <path d="M 150,620 L 150,660" class="line-green" marker-end="url(#arrowhead-green)"/>
  <text x="170" y="640" class="label" fill="#388e3c">Metrics</text>

  <!-- Node 1: Prometheus to Thanos Sidecar -->
  <path d="M 220,700 L 260,700" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 1: Prometheus to Local Thanos Receiver (straight down) -->
  <path d="M 150,740 L 150,780" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="80" y="760" class="label" fill="#7b1fa2">Remote Write</text>

  <!-- Node 1: Prometheus to Node 2 Thanos Receiver (cross-node remote write, very bottom) -->
  <path d="M 220,730 L 250,730 L 250,1010 L 1700,1010 L 1700,840 L 1780,840" class="line-purple" style="stroke-dasharray: 5,5" marker-end="url(#arrowhead-purple)"/>
  <text x="975" y="1005" class="label" fill="#7b1fa2">Cross-node Remote Write</text>

  <!-- Node 1: Query Frontend to Query -->
  <path d="M 720,820 L 400,820" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 1: Thanos Query to Sidecar -->
  <path d="M 330,780 L 330,740" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 1: Thanos Query to Receiver -->
  <path d="M 260,820 L 220,820" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 1: Thanos Query to Store -->
  <path d="M 290,860 L 170,900" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 1: Thanos Sidecar to MinIO (right side curve) -->
  <path d="M 400,700 L 420,700 L 420,1020 L 800,1020 L 800,1040" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="430" y="860" class="label" fill="#7b1fa2">Upload Blocks</text>

  <!-- Node 1: Thanos Store to MinIO bucket -->
  <path d="M 130,960 L 130,1180 L 830,1180 L 830,1240" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="150" y="1070" class="label" fill="#7b1fa2">Read Blocks</text>

  <!-- Node 1: Thanos Receiver to MinIO bucket (far left) -->
  <path d="M 80,850 L 50,850 L 50,1150 L 780,1150 L 780,1240" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="60" y="1000" class="label" fill="#7b1fa2">Upload Blocks</text>

  <!-- Node 1: Compactor to MinIO bucket -->
  <path d="M 350,960 L 350,1200 L 870,1200 L 870,1240" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="360" y="1100" class="label" fill="#7b1fa2">Compact Blocks</text>

  <!-- Node 1: Loki to MinIO bucket -->
  <path d="M 550,620 L 550,990 L 920,990 L 920,1240" class="line-orange" marker-end="url(#arrowhead-orange)"/>
  <text x="570" y="900" class="label" fill="#f57c00">Store Logs</text>

  <!-- Node 1: MinIO to Distributed Cluster -->
  <path d="M 800,1120 L 850,1240" class="line-brown" marker-end="url(#arrowhead-brown)"/>
  <text x="810" y="1180" class="label" fill="#5d4037">Erasure Coding</text>

  <!-- Node 2: Keepalived to HAProxy -->
  <path d="M 1570,340 L 1570,420" class="line-red" marker-end="url(#arrowhead-red)"/>
  <text x="1590" y="380" class="label" fill="#d32f2f">Monitor</text>

  <!-- Node 2: HAProxy branching to services (완전히 분리된 경로) -->
  <!-- HAProxy to OTel (far right) -->
  <path d="M 1620,460 L 1750,460 L 1750,530 L 1850,530 L 1850,550" class="line-blue" marker-end="url(#arrowhead-blue)"/>
  <text x="1795" y="455" class="label" fill="#1976d2">OTLP :4318</text>

  <!-- HAProxy to Loki (right center) -->
  <path d="M 1620,480 L 1650,480 L 1650,520 L 1450,520 L 1450,550" class="line-orange" marker-end="url(#arrowhead-orange)"/>
  <text x="1540" y="515" class="label" fill="#f57c00">Loki :3100</text>

  <!-- HAProxy to Query Frontend (far left - 완전히 분리) -->
  <path d="M 1520,460 L 1340,460 L 1340,740 L 1210,740 L 1210,780" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="1250" y="455" class="label" fill="#7b1fa2">Query Frontend :19193</text>

  <!-- HAProxy to Thanos Query (via right side) -->
  <path d="M 1620,490 L 1800,490 L 1800,755 L 1740,755 L 1740,810" class="line-purple" style="stroke-dasharray: 3,3" marker-end="url(#arrowhead-purple)"/>
  <text x="1810" y="620" class="label" fill="#7b1fa2">Query :9192</text>

  <!-- Node 2: OTel to Prometheus -->
  <path d="M 1850,620 L 1850,660" class="line-green" marker-end="url(#arrowhead-green)"/>
  <text x="1870" y="640" class="label" fill="#388e3c">Metrics</text>

  <!-- Node 2: Prometheus to Thanos Sidecar -->
  <path d="M 1780,700 L 1740,700" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 2: Prometheus to Local Thanos Receiver (straight down) -->
  <path d="M 1850,740 L 1850,780" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="1870" y="760" class="label" fill="#7b1fa2">Remote Write</text>

  <!-- Node 2: Prometheus to Node 1 Thanos Receiver (cross-node remote write, very bottom) -->
  <path d="M 1780,730 L 1750,730 L 1750,1030 L 300,1030 L 300,840 L 220,840" class="line-purple" style="stroke-dasharray: 5,5" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 2: Query Frontend to Query -->
  <path d="M 1280,820 L 1600,820" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 2: Thanos Query to Sidecar -->
  <path d="M 1670,780 L 1670,740" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 2: Thanos Query to Receiver -->
  <path d="M 1740,820 L 1780,820" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 2: Thanos Query to Store -->
  <path d="M 1710,860 L 1830,900" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 2: Thanos Sidecar to MinIO (left side curve) -->
  <path d="M 1600,700 L 1580,700 L 1580,1020 L 1200,1020 L 1200,1040" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="1490" y="860" class="label" fill="#7b1fa2">Upload Blocks</text>

  <!-- Node 2: Thanos Store to MinIO bucket -->
  <path d="M 1870,960 L 1870,1180 L 1170,1180 L 1170,1240" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="1810" y="1070" class="label" fill="#7b1fa2">Read Blocks</text>

  <!-- Node 2: Thanos Receiver to MinIO bucket (far right) -->
  <path d="M 1920,850 L 1950,850 L 1950,1150 L 1220,1150 L 1220,1240" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="1920" y="1000" class="label" fill="#7b1fa2">Upload Blocks</text>

  <!-- Node 2: Compactor to MinIO bucket -->
  <path d="M 1650,960 L 1650,1200 L 1130,1200 L 1130,1240" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="1590" y="1100" class="label" fill="#7b1fa2">Compact Blocks</text>

  <!-- Node 2: Loki to MinIO bucket -->
  <path d="M 1450,620 L 1450,990 L 1080,990 L 1080,1240" class="line-orange" marker-end="url(#arrowhead-orange)"/>
  <text x="1390" y="900" class="label" fill="#f57c00">Store Logs</text>

  <!-- Node 2: MinIO to Distributed Cluster -->
  <path d="M 1200,1120 L 1150,1240" class="line-brown" marker-end="url(#arrowhead-brown)"/>
  <text x="1160" y="1180" class="label" fill="#5d4037">Erasure Coding</text>

  <!-- MinIO inter-node replication -->
  <line x1="900" y1="1080" x2="1100" y2="1080" class="line-brown" style="stroke-dasharray: 5,5"/>
  <text x="1000" y="1075" class="label" fill="#5d4037">Distributed Cluster Sync</text>

  <!-- Buckets to Storage Pool (Both buckets point to shared pool) -->
  <path d="M 860,1430 L 900,1400" class="line-brown" marker-end="url(#arrowhead-brown)"/>
  <path d="M 1140,1430 L 1100,1400" class="line-brown" marker-end="url(#arrowhead-brown)"/>

  <!-- Legend -->
  <rect x="50" y="1610" width="1900" height="180" fill="#fafafa" stroke="#999" stroke-width="1" rx="5"/>
  <text x="1000" y="1640" class="text" style="font-weight: bold; font-size: 16px;">Legend</text>

  <line x1="100" y1="1670" x2="150" y2="1670" class="line-blue" marker-end="url(#arrowhead-blue)"/>
  <text x="200" y="1675" class="text-small" style="text-anchor: start;">OTLP Data Flow</text>

  <line x1="450" y1="1670" x2="500" y2="1670" class="line-green" marker-end="url(#arrowhead-green)"/>
  <text x="550" y="1675" class="text-small" style="text-anchor: start;">Metrics Flow</text>

  <line x1="800" y1="1670" x2="850" y2="1670" class="line-orange" marker-end="url(#arrowhead-orange)"/>
  <text x="900" y="1675" class="text-small" style="text-anchor: start;">Logs Flow</text>

  <line x1="1150" y1="1670" x2="1200" y2="1670" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="1250" y="1675" class="text-small" style="text-anchor: start;">Thanos gRPC/Storage</text>

  <line x1="1550" y1="1670" x2="1600" y2="1670" class="line-red" marker-end="url(#arrowhead-red)"/>
  <text x="1650" y="1675" class="text-small" style="text-anchor: start;">VRRP/HA Control</text>

  <line x1="100" y1="1705" x2="150" y2="1705" class="line-brown" marker-end="url(#arrowhead-brown)"/>
  <text x="200" y="1710" class="text-small" style="text-anchor: start;">MinIO Storage</text>

  <line x1="450" y1="1705" x2="500" y2="1705" class="line" style="stroke-dasharray: 5,5"/>
  <text x="550" y="1710" class="text-small" style="text-anchor: start;">Cross-node/Replication</text>

  <rect x="800" y="1690" width="30" height="20" class="keepalived-box" rx="2"/>
  <text x="880" y="1705" class="text-small" style="text-anchor: start;">Keepalived (HA)</text>

  <rect x="1100" y="1690" width="30" height="20" class="haproxy-box" rx="2"/>
  <text x="1180" y="1705" class="text-small" style="text-anchor: start;">HAProxy (Load Balancer)</text>

  <rect x="1450" y="1690" width="30" height="20" class="storage-box" rx="2"/>
  <text x="1530" y="1705" class="text-small" style="text-anchor: start;">Storage/Bucket</text>

  <rect x="100" y="1735" width="30" height="20" class="vip-box" rx="2"/>
  <text x="180" y="1750" class="text-small" style="text-anchor: start;">Virtual IP</text>

  <rect x="450" y="1735" width="30" height="20" class="master-box" rx="2"/>
  <text x="530" y="1750" class="text-small" style="text-anchor: start;">Node 1 (Master)</text>

  <rect x="800" y="1735" width="30" height="20" class="backup-box" rx="2"/>
  <text x="880" y="1750" class="text-small" style="text-anchor: start;">Node 2 (Backup)</text>

  <rect x="1100" y="1735" width="30" height="20" class="minio-cluster" rx="2"/>
  <text x="1180" y="1750" class="text-small" style="text-anchor: start;">MinIO Distributed Cluster</text>
</svg>
