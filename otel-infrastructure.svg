<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1700" width="1800" height="1700">
  <!-- Define styles -->
  <defs>
    <style>
      .box { fill: #ffffff; stroke: #333; stroke-width: 2; }
      .cluster { fill: #f0f0f0; stroke: #666; stroke-width: 2; stroke-dasharray: 5,5; }
      .vip-box { fill: #e3f2fd; stroke: #1976d2; stroke-width: 3; }
      .master-box { fill: #fff3e0; stroke: #f57c00; stroke-width: 2; }
      .backup-box { fill: #f3e5f5; stroke: #7b1fa2; stroke-width: 2; }
      .storage-box { fill: #e8f5e9; stroke: #388e3c; stroke-width: 2; }
      .client-box { fill: #fce4ec; stroke: #c2185b; stroke-width: 2; }
      .keepalived-box { fill: #ffebee; stroke: #d32f2f; stroke-width: 2; }
      .haproxy-box { fill: #e8eaf6; stroke: #3f51b5; stroke-width: 2; }
      .minio-cluster { fill: #f1f8e9; stroke: #689f38; stroke-width: 3; stroke-dasharray: 8,4; }
      .text { font-family: Arial, sans-serif; font-size: 14px; fill: #333; text-anchor: middle; }
      .text-small { font-family: Arial, sans-serif; font-size: 11px; fill: #666; text-anchor: middle; }
      .title { font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; fill: #1a237e; text-anchor: middle; }
      .label { font-family: Arial, sans-serif; font-size: 10px; fill: #666; }
      .line { stroke: #333; stroke-width: 2; fill: none; }
      .line-blue { stroke: #1976d2; stroke-width: 2; fill: none; }
      .line-orange { stroke: #f57c00; stroke-width: 2; fill: none; }
      .line-green { stroke: #388e3c; stroke-width: 2; fill: none; }
      .line-purple { stroke: #7b1fa2; stroke-width: 2; fill: none; }
      .line-brown { stroke: #5d4037; stroke-width: 2; fill: none; }
      .line-red { stroke: #d32f2f; stroke-width: 2; fill: none; }
      .arrow { stroke: #333; stroke-width: 2; fill: #333; }
    </style>

    <!-- Define arrow markers -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#1976d2" />
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#f57c00" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#388e3c" />
    </marker>
    <marker id="arrowhead-purple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#7b1fa2" />
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#d32f2f" />
    </marker>
    <marker id="arrowhead-brown" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#5d4037" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="900" y="30" class="title">OpenTelemetry High Availability Infrastructure</text>

  <!-- External Clients -->
  <rect x="800" y="60" width="200" height="60" class="client-box" rx="5"/>
  <text x="900" y="85" class="text">External Clients</text>
  <text x="900" y="105" class="text-small">(OTLP/HTTP)</text>

  <!-- Virtual IP -->
  <rect x="750" y="160" width="300" height="100" class="vip-box" rx="5"/>
  <text x="900" y="185" class="text" style="font-weight: bold;">Virtual IP: 192.168.110.140</text>
  <text x="900" y="205" class="text-small">OTLP :4318 | Thanos QF :19193</text>
  <text x="900" y="225" class="text-small">Thanos Q :9192 | Loki :3100</text>
  <text x="900" y="245" class="text-small">(VRRP Managed)</text>

  <!-- Node 1 (MASTER) -->
  <rect x="50" y="320" width="750" height="700" class="cluster" rx="10"/>
  <text x="425" y="345" class="text" style="font-weight: bold;">Node 1 - MASTER (192.168.110.214)</text>

  <!-- Node 1: Keepalived (Separate) -->
  <rect x="280" y="280" width="100" height="60" class="keepalived-box" rx="5"/>
  <text x="330" y="305" class="text" style="font-weight: bold;">Keepalived</text>
  <text x="330" y="325" class="text-small">Priority: 100</text>

  <!-- Node 1: HAProxy (Separate) -->
  <rect x="280" y="370" width="100" height="80" class="haproxy-box" rx="5"/>
  <text x="330" y="395" class="text" style="font-weight: bold;">HAProxy</text>
  <text x="330" y="415" class="text-small">Load Balancer</text>
  <text x="330" y="435" class="text-small">:4318/19193/</text>

  <!-- Node 1: OTel Aggregator -->
  <rect x="80" y="490" width="140" height="70" class="master-box" rx="5"/>
  <text x="150" y="515" class="text">OTel Aggregator</text>
  <text x="150" y="535" class="text-small">:14318 (HTTP)</text>
  <text x="150" y="550" class="text-small">:14317 (gRPC)</text>

  <!-- Node 1: Prometheus -->
  <rect x="80" y="600" width="140" height="80" class="master-box" rx="5"/>
  <text x="150" y="625" class="text">Prometheus</text>
  <text x="150" y="645" class="text-small">:19090</text>
  <text x="150" y="665" class="text-small">Retention: 2h</text>

  <!-- Node 1: Thanos Sidecar -->
  <rect x="240" y="600" width="140" height="80" class="master-box" rx="5"/>
  <text x="310" y="625" class="text">Thanos Sidecar</text>
  <text x="310" y="645" class="text-small">:10901/:10902</text>

  <!-- Node 1: Thanos Receiver -->
  <rect x="80" y="710" width="140" height="80" class="master-box" rx="5"/>
  <text x="150" y="735" class="text">Thanos Receiver</text>
  <text x="150" y="755" class="text-small">:19291/:10907</text>
  <text x="150" y="775" class="text-small">:10909</text>

  <!-- Node 1: Thanos Query -->
  <rect x="240" y="710" width="140" height="80" class="master-box" rx="5"/>
  <text x="310" y="735" class="text">Thanos Query</text>
  <text x="310" y="755" class="text-small">:19192/:10904</text>

  <!-- Node 1: Query Frontend -->
  <rect x="400" y="710" width="140" height="80" class="master-box" rx="5"/>
  <text x="470" y="735" class="text">Query Frontend</text>
  <text x="470" y="755" class="text-small">:29193</text>

  <!-- Node 1: Thanos Store -->
  <rect x="80" y="820" width="140" height="60" class="master-box" rx="5"/>
  <text x="150" y="845" class="text">Thanos Store</text>
  <text x="150" y="865" class="text-small">:10905/:10906</text>

  <!-- Node 1: Compactor -->
  <rect x="240" y="820" width="140" height="60" class="master-box" rx="5"/>
  <text x="310" y="845" class="text">Compactor</text>
  <text x="310" y="865" class="text-small">:10912</text>

  <!-- Node 1: Loki -->
  <rect x="400" y="490" width="140" height="70" class="master-box" rx="5"/>
  <text x="470" y="515" class="text">Loki</text>
  <text x="470" y="535" class="text-small">:13100</text>
  <text x="470" y="550" class="text-small">Retention: 90d</text>

  <!-- Node 1: MinIO -->
  <rect x="570" y="940" width="200" height="80" class="master-box" rx="5"/>
  <text x="670" y="965" class="text">MinIO Node 1</text>
  <text x="670" y="985" class="text-small">:9000 (S3 API)</text>
  <text x="670" y="1005" class="text-small">/data1 + /data2</text>

  <!-- Node 2 (BACKUP) -->
  <rect x="1000" y="320" width="750" height="700" class="cluster" rx="10"/>
  <text x="1375" y="345" class="text" style="font-weight: bold;">Node 2 - BACKUP (192.168.110.119)</text>

  <!-- Node 2: Keepalived (Separate) -->
  <rect x="1410" y="280" width="100" height="60" class="keepalived-box" rx="5"/>
  <text x="1460" y="305" class="text" style="font-weight: bold;">Keepalived</text>
  <text x="1460" y="325" class="text-small">Priority: 90</text>

  <!-- Node 2: HAProxy (Separate) -->
  <rect x="1410" y="370" width="100" height="80" class="haproxy-box" rx="5"/>
  <text x="1460" y="395" class="text" style="font-weight: bold;">HAProxy</text>
  <text x="1460" y="415" class="text-small">Load Balancer</text>
  <text x="1460" y="435" class="text-small">:4318/19193/</text>

  <!-- Node 2: OTel Aggregator -->
  <rect x="1570" y="490" width="140" height="70" class="backup-box" rx="5"/>
  <text x="1640" y="515" class="text">OTel Aggregator</text>
  <text x="1640" y="535" class="text-small">:14318 (HTTP)</text>
  <text x="1640" y="550" class="text-small">:14317 (gRPC)</text>

  <!-- Node 2: Prometheus -->
  <rect x="1570" y="600" width="140" height="80" class="backup-box" rx="5"/>
  <text x="1640" y="625" class="text">Prometheus</text>
  <text x="1640" y="645" class="text-small">:19090</text>
  <text x="1640" y="665" class="text-small">Retention: 2h</text>

  <!-- Node 2: Thanos Sidecar -->
  <rect x="1410" y="600" width="140" height="80" class="backup-box" rx="5"/>
  <text x="1480" y="625" class="text">Thanos Sidecar</text>
  <text x="1480" y="645" class="text-small">:10901/:10902</text>

  <!-- Node 2: Thanos Receiver -->
  <rect x="1570" y="710" width="140" height="80" class="backup-box" rx="5"/>
  <text x="1640" y="735" class="text">Thanos Receiver</text>
  <text x="1640" y="755" class="text-small">:19291/:10907</text>
  <text x="1640" y="775" class="text-small">:10909</text>

  <!-- Node 2: Thanos Query -->
  <rect x="1410" y="710" width="140" height="80" class="backup-box" rx="5"/>
  <text x="1480" y="735" class="text">Thanos Query</text>
  <text x="1480" y="755" class="text-small">:19192/:10904</text>

  <!-- Node 2: Query Frontend -->
  <rect x="1250" y="710" width="140" height="80" class="backup-box" rx="5"/>
  <text x="1320" y="735" class="text">Query Frontend</text>
  <text x="1320" y="755" class="text-small">:29193</text>

  <!-- Node 2: Thanos Store -->
  <rect x="1570" y="820" width="140" height="60" class="backup-box" rx="5"/>
  <text x="1640" y="845" class="text">Thanos Store</text>
  <text x="1640" y="865" class="text-small">:10905/:10906</text>

  <!-- Node 2: Compactor -->
  <rect x="1410" y="820" width="140" height="60" class="backup-box" rx="5"/>
  <text x="1480" y="845" class="text">Compactor</text>
  <text x="1480" y="865" class="text-small">:10912</text>

  <!-- Node 2: Loki -->
  <rect x="1250" y="490" width="140" height="70" class="backup-box" rx="5"/>
  <text x="1320" y="515" class="text">Loki</text>
  <text x="1320" y="535" class="text-small">:13100</text>
  <text x="1320" y="550" class="text-small">Retention: 90d</text>

  <!-- Node 2: MinIO -->
  <rect x="1030" y="940" width="200" height="80" class="backup-box" rx="5"/>
  <text x="1130" y="965" class="text">MinIO Node 2</text>
  <text x="1130" y="985" class="text-small">:9000 (S3 API)</text>
  <text x="1130" y="1005" class="text-small">/data1 + /data2</text>

  <!-- MinIO Distributed Cluster with Buckets -->
  <rect x="550" y="1130" width="700" height="280" class="minio-cluster" rx="10"/>
  <text x="900" y="1160" class="text" style="font-weight: bold; font-size: 16px;">MinIO Distributed Cluster (Erasure Coding)</text>
  <text x="900" y="1185" class="text-small">4 Drives across 2 Nodes - Distributed Mode</text>

  <!-- MinIO Architecture -->
  <rect x="580" y="1210" width="280" height="80" class="storage-box" rx="5"/>
  <text x="720" y="1235" class="text" style="font-weight: bold;">MinIO Storage Pool</text>
  <text x="720" y="1255" class="text-small">Node1:/data1 + Node1:/data2</text>
  <text x="720" y="1275" class="text-small">Node2:/data1 + Node2:/data2</text>

  <rect x="940" y="1210" width="280" height="80" class="storage-box" rx="5"/>
  <text x="1080" y="1235" class="text" style="font-weight: bold;">Replication</text>
  <text x="1080" y="1255" class="text-small">Erasure Coding: EC:2</text>
  <text x="1080" y="1275" class="text-small">Fault Tolerance: 2 drives</text>

  <!-- MinIO Buckets -->
  <rect x="600" y="1320" width="250" height="70" class="storage-box" rx="5" style="fill: #c8e6c9;"/>
  <text x="725" y="1345" class="text" style="font-weight: bold;">Bucket: thanos-metrics</text>
  <text x="725" y="1365" class="text-small">Stores: Prometheus Blocks</text>
  <text x="725" y="1380" class="text-small">Used by: Thanos Components</text>

  <rect x="900" y="1320" width="250" height="70" class="storage-box" rx="5" style="fill: #ffe0b2;"/>
  <text x="1025" y="1345" class="text" style="font-weight: bold;">Bucket: loki-data</text>
  <text x="1025" y="1365" class="text-small">Stores: Log Chunks/Index</text>
  <text x="1025" y="1380" class="text-small">Used by: Loki Instances</text>

  <!-- Connections: Clients to VIP -->
  <path d="M 900,120 L 900,160" class="line-blue" marker-end="url(#arrowhead-blue)"/>
  <text x="930" y="145" class="label" fill="#1976d2">OTLP/HTTP</text>

  <!-- VIP to Node 1 Keepalived -->
  <path d="M 800,260 L 330,280" class="line-red" marker-end="url(#arrowhead-red)"/>
  <text x="520" y="265" class="label" fill="#d32f2f">VRRP Failover</text>

  <!-- VIP to Node 2 Keepalived -->
  <path d="M 1000,260 L 1460,280" class="line-red" marker-end="url(#arrowhead-red)"/>

  <!-- Node 1: Keepalived to HAProxy -->
  <path d="M 330,340 L 330,370" class="line-red" marker-end="url(#arrowhead-red)"/>
  <text x="350" y="360" class="label" fill="#d32f2f">Monitor</text>

  <!-- Node 1: HAProxy branching to services -->
  <!-- HAProxy to OTel -->
  <path d="M 280,410 L 150,410 L 150,490" class="line-blue" marker-end="url(#arrowhead-blue)"/>
  <text x="210" y="405" class="label" fill="#1976d2">OTLP :4318</text>

  <!-- HAProxy to Loki -->
  <path d="M 380,410 L 470,410 L 470,490" class="line-orange" marker-end="url(#arrowhead-orange)"/>
  <text x="430" y="405" class="label" fill="#f57c00">Loki :3100</text>

  <!-- HAProxy to Query Frontend -->
  <path d="M 330,450 L 330,470 L 470,470 L 470,710" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="410" y="590" class="label" fill="#7b1fa2">QF :19193</text>

  <!-- HAProxy to Thanos Query -->
  <path d="M 310,450 L 310,470 L 310,550 L 240,550 L 240,710" class="line-purple" style="stroke-dasharray: 3,3" marker-end="url(#arrowhead-purple)"/>
  <text x="260" y="630" class="label" fill="#7b1fa2">Q :9192</text>

  <!-- Node 1: OTel to Prometheus -->
  <path d="M 150,560 L 150,600" class="line-green" marker-end="url(#arrowhead-green)"/>
  <text x="170" y="580" class="label" fill="#388e3c">Metrics</text>

  <!-- Node 1: Prometheus to Thanos Sidecar -->
  <path d="M 220,640 L 240,640" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 1: Prometheus to Local Thanos Receiver -->
  <path d="M 150,680 L 150,710" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="170" y="695" class="label" fill="#7b1fa2">RW</text>

  <!-- Node 1: Prometheus to Node 2 Thanos Receiver (cross-node remote write) -->
  <path d="M 220,670 L 250,670 L 250,900 L 1500,900 L 1500,750 L 1570,750" class="line-purple" style="stroke-dasharray: 5,5" marker-end="url(#arrowhead-purple)"/>
  <text x="850" y="895" class="label" fill="#7b1fa2">Cross-node Remote Write</text>

  <!-- Node 1: Query Frontend to Query -->
  <path d="M 400,750 L 380,750" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 1: Thanos Query to Sidecar -->
  <path d="M 310,710 L 310,680" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 1: Thanos Query to Receiver -->
  <path d="M 240,750 L 220,750" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 1: Thanos Query to Store -->
  <path d="M 280,790 L 200,820" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 1: Thanos Sidecar to MinIO -->
  <path d="M 310,680 L 310,920 L 670,920 L 670,940" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="320" y="800" class="label" fill="#7b1fa2">Upload</text>

  <!-- Node 1: Thanos Store to MinIO bucket -->
  <path d="M 150,880 L 150,1080 L 700,1080 L 700,1130" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="170" y="980" class="label" fill="#7b1fa2">Read</text>

  <!-- Node 1: Thanos Receiver to MinIO bucket -->
  <path d="M 80,750 L 50,750 L 50,1050 L 650,1050 L 650,1130" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="60" y="900" class="label" fill="#7b1fa2">Upload</text>

  <!-- Node 1: Compactor to MinIO bucket -->
  <path d="M 310,880 L 310,1100 L 750,1100 L 750,1130" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="320" y="1000" class="label" fill="#7b1fa2">Compact</text>

  <!-- Node 1: Loki to MinIO bucket -->
  <path d="M 470,560 L 470,890 L 800,890 L 800,1130" class="line-orange" marker-end="url(#arrowhead-orange)"/>
  <text x="480" y="850" class="label" fill="#f57c00">Store Logs</text>

  <!-- Node 1: MinIO to Distributed Cluster -->
  <path d="M 670,1020 L 720,1130" class="line-brown" marker-end="url(#arrowhead-brown)"/>
  <text x="680" y="1075" class="label" fill="#5d4037">EC</text>

  <!-- Node 2: Keepalived to HAProxy -->
  <path d="M 1460,340 L 1460,370" class="line-red" marker-end="url(#arrowhead-red)"/>
  <text x="1480" y="360" class="label" fill="#d32f2f">Monitor</text>

  <!-- Node 2: HAProxy branching to services -->
  <!-- HAProxy to OTel -->
  <path d="M 1510,410 L 1640,410 L 1640,490" class="line-blue" marker-end="url(#arrowhead-blue)"/>
  <text x="1580" y="405" class="label" fill="#1976d2">OTLP :4318</text>

  <!-- HAProxy to Loki -->
  <path d="M 1410,410 L 1320,410 L 1320,490" class="line-orange" marker-end="url(#arrowhead-orange)"/>
  <text x="1360" y="405" class="label" fill="#f57c00">Loki :3100</text>

  <!-- HAProxy to Query Frontend -->
  <path d="M 1460,450 L 1460,470 L 1320,470 L 1320,710" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="1380" y="590" class="label" fill="#7b1fa2">QF :19193</text>

  <!-- HAProxy to Thanos Query -->
  <path d="M 1480,450 L 1480,470 L 1480,550 L 1550,550 L 1550,710" class="line-purple" style="stroke-dasharray: 3,3" marker-end="url(#arrowhead-purple)"/>
  <text x="1530" y="630" class="label" fill="#7b1fa2">Q :9192</text>

  <!-- Node 2: OTel to Prometheus -->
  <path d="M 1640,560 L 1640,600" class="line-green" marker-end="url(#arrowhead-green)"/>
  <text x="1660" y="580" class="label" fill="#388e3c">Metrics</text>

  <!-- Node 2: Prometheus to Thanos Sidecar -->
  <path d="M 1570,640 L 1550,640" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 2: Prometheus to Local Thanos Receiver -->
  <path d="M 1640,680 L 1640,710" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="1660" y="695" class="label" fill="#7b1fa2">RW</text>

  <!-- Node 2: Prometheus to Node 1 Thanos Receiver (cross-node remote write) -->
  <path d="M 1570,670 L 1540,670 L 1540,930 L 300,930 L 300,750 L 220,750" class="line-purple" style="stroke-dasharray: 5,5" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 2: Query Frontend to Query -->
  <path d="M 1390,750 L 1410,750" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 2: Thanos Query to Sidecar -->
  <path d="M 1480,710 L 1480,680" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 2: Thanos Query to Receiver -->
  <path d="M 1550,750 L 1570,750" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 2: Thanos Query to Store -->
  <path d="M 1510,790 L 1590,820" class="line-purple" marker-end="url(#arrowhead-purple)"/>

  <!-- Node 2: Thanos Sidecar to MinIO -->
  <path d="M 1480,680 L 1480,920 L 1130,920 L 1130,940" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="1300" y="800" class="label" fill="#7b1fa2">Upload</text>

  <!-- Node 2: Thanos Store to MinIO bucket -->
  <path d="M 1640,880 L 1640,1080 L 1100,1080 L 1100,1130" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="1580" y="980" class="label" fill="#7b1fa2">Read</text>

  <!-- Node 2: Thanos Receiver to MinIO bucket -->
  <path d="M 1710,750 L 1740,750 L 1740,1050 L 1150,1050 L 1150,1130" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="1700" y="900" class="label" fill="#7b1fa2">Upload</text>

  <!-- Node 2: Compactor to MinIO bucket -->
  <path d="M 1480,880 L 1480,1100 L 1050,1100 L 1050,1130" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="1420" y="1000" class="label" fill="#7b1fa2">Compact</text>

  <!-- Node 2: Loki to MinIO bucket -->
  <path d="M 1320,560 L 1320,890 L 1000,890 L 1000,1130" class="line-orange" marker-end="url(#arrowhead-orange)"/>
  <text x="1260" y="850" class="label" fill="#f57c00">Store Logs</text>

  <!-- Node 2: MinIO to Distributed Cluster -->
  <path d="M 1130,1020 L 1080,1130" class="line-brown" marker-end="url(#arrowhead-brown)"/>
  <text x="1100" y="1075" class="label" fill="#5d4037">EC</text>

  <!-- MinIO inter-node replication -->
  <line x1="770" y1="980" x2="1030" y2="980" class="line-brown" style="stroke-dasharray: 5,5"/>
  <text x="900" y="975" class="label" fill="#5d4037">Distributed Cluster Sync</text>

  <!-- Buckets to Storage Pool -->
  <path d="M 725,1320 L 720,1290" class="line-brown" marker-end="url(#arrowhead-brown)"/>
  <path d="M 1025,1320 L 1080,1290" class="line-brown" marker-end="url(#arrowhead-brown)"/>

  <!-- Legend -->
  <rect x="50" y="1480" width="1700" height="150" fill="#fafafa" stroke="#999" stroke-width="1" rx="5"/>
  <text x="900" y="1505" class="text" style="font-weight: bold; font-size: 16px;">Legend</text>

  <line x1="100" y1="1530" x2="150" y2="1530" class="line-blue" marker-end="url(#arrowhead-blue)"/>
  <text x="200" y="1535" class="text-small" style="text-anchor: start;">OTLP Data Flow</text>

  <line x1="400" y1="1530" x2="450" y2="1530" class="line-green" marker-end="url(#arrowhead-green)"/>
  <text x="500" y="1535" class="text-small" style="text-anchor: start;">Metrics Flow</text>

  <line x1="700" y1="1530" x2="750" y2="1530" class="line-orange" marker-end="url(#arrowhead-orange)"/>
  <text x="800" y="1535" class="text-small" style="text-anchor: start;">Logs Flow</text>

  <line x1="1000" y1="1530" x2="1050" y2="1530" class="line-purple" marker-end="url(#arrowhead-purple)"/>
  <text x="1100" y="1535" class="text-small" style="text-anchor: start;">Thanos gRPC/Storage</text>

  <line x1="1400" y1="1530" x2="1450" y2="1530" class="line-red" marker-end="url(#arrowhead-red)"/>
  <text x="1500" y="1535" class="text-small" style="text-anchor: start;">VRRP/HA Control</text>

  <line x1="100" y1="1560" x2="150" y2="1560" class="line-brown" marker-end="url(#arrowhead-brown)"/>
  <text x="200" y="1565" class="text-small" style="text-anchor: start;">MinIO Storage</text>

  <line x1="400" y1="1560" x2="450" y2="1560" class="line" style="stroke-dasharray: 5,5"/>
  <text x="500" y="1565" class="text-small" style="text-anchor: start;">Cross-node/Replication</text>

  <rect x="700" y="1545" width="30" height="20" class="keepalived-box" rx="2"/>
  <text x="780" y="1560" class="text-small" style="text-anchor: start;">Keepalived (HA)</text>

  <rect x="950" y="1545" width="30" height="20" class="haproxy-box" rx="2"/>
  <text x="1030" y="1560" class="text-small" style="text-anchor: start;">HAProxy (LB)</text>

  <rect x="1200" y="1545" width="30" height="20" class="storage-box" rx="2"/>
  <text x="1280" y="1560" class="text-small" style="text-anchor: start;">Storage/Bucket</text>

  <rect x="100" y="1585" width="30" height="20" class="vip-box" rx="2"/>
  <text x="180" y="1600" class="text-small" style="text-anchor: start;">VIP/Virtual IP</text>

  <rect x="400" y="1585" width="30" height="20" class="master-box" rx="2"/>
  <text x="480" y="1600" class="text-small" style="text-anchor: start;">Node 1 (Master)</text>

  <rect x="700" y="1585" width="30" height="20" class="backup-box" rx="2"/>
  <text x="780" y="1600" class="text-small" style="text-anchor: start;">Node 2 (Backup)</text>

  <rect x="1000" y="1585" width="30" height="20" class="minio-cluster" rx="2"/>
  <text x="1080" y="1600" class="text-small" style="text-anchor: start;">MinIO Distributed Cluster</text>
</svg>
